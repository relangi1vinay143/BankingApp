<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'application/CSS/index2.css' %}">
    <style>
        .logout-btn {
            position: absolute;
            top: 20px;
            right: 20px;
        }
    </style>
</head>
<body>
    
    <!-- Logout button outside the table, fixed at top-right -->
    <a href="{% url 'logout' %}" class="btn btn-danger logout-btn desktop-only">Logout</a>

    <div class="Accounter_bg">
        <div>
            <form method="post">
                {% csrf_token %}
                <table border="3" class="table table-bordered">
                    <tr>
                        <th style="text-align:center;">Account Holder Details</th>
                        <th class="photo-col">Photo</th>
                    </tr>
                    <tr>
                        <th>Name of the Account Holder</th>
                        <th><span>{{ account.name }}</span></th>
                        <td class="photo-col" rowspan="15">
                            {% if account.photo %}
                                <img src="{{ account.photo.url }}" alt="Profile Photo" class="photo">
                            {% else %}
                                <img src="{% static 'application/images/no-photo.png' %}" alt="No Photo" class="photo">
                            {% endif %}
                        </td>
                        <tr class="mobile-only">
    <td colspan="3" style="text-align:center;">
        <a href="{% url 'logout' %}" class="btn btn-danger">Logout</a>
    </td>
</tr>
                    </tr>
                    <tr><th>Account Number</th><th><span>{{ account.account_number }}</span></th></tr>
                    <tr><th>Account Type</th><th><span>{{ account.account_type }}</span></th></tr>
                    <tr><th>Aadhar Number</th><th><span>{{ account.aadhar_number }}</span></th></tr>
                    <tr><th>Branch</th><th><span>{{ account.branch }}</span></th></tr>
                    <tr><th>IFSC</th><th><span>{{ account.ifsc }}</span></th></tr>
                    <tr><th>Age</th><th><span>{{ account.age }}</span></th></tr>
                    <tr><th>Gender</th><th><span>{{ account.gender }}</span></th></tr>
                    <tr><th>Mobile Number</th><th><span>{{ account.mobile_number }}</span></th></tr>
                    <tr><th>Address</th><th><span>{{ account.address }}</span></th></tr>
                    <tr><th>Town/City</th><th><span>{{ account.town_city }}</span></th></tr>
                    <tr><th>District</th><th><span>{{ account.district }}</span></th></tr>
                    <tr><th>State</th><th><span>{{ account.state }}</span></th></tr>
                    <tr><th>Country</th><th><span>{{ account.country }}</span></th></tr>
                    <tr><th>PINCODE</th><th><span>{{ account.pincode }}</span></th></tr>
                    <tr><th>Email</th><th><span>{{ account.email }}</span></th></tr>
                    <tr><th>Account Created On</th><th><span>{{ account.account_created_on }}</span></th></tr>
                    
                    <!-- Action buttons -->
                    <tr>
                        <th>Account Balance</th>
                        <th id="balance-display"><span>******</span></th>
                    </tr>

                    <!-- Action buttons -->
                    <tr>
                        <th>
                            <button type="button" onclick="showBalance()" class="btn btn-outline-primary">
                                Account Balance
                            </button>
                        </th>
                        <th>
                            <button type="button" onclick="creaditAmount()" class="btn btn-outline-success">
                                Credit
                            </button>
                        </th>
                        <th>
                            <button type="button" onclick="debitAmount()" class="btn btn-outline-danger">
                                Debit
                            </button>
                        </th>
                    </tr>
                </table>
            </form>
        </div>
    </div>

    <!-- JavaScript logic -->
    <script>
        function showBalance() {
            // Generate random balance between 1000 and 100000
            let randomAmount = 30000;;
            document.getElementById("balance-display").innerHTML = "₹ " + randomAmount;
        }

        function creaditAmount() {
            let amount = prompt("Enter amount to credit:");
            if(amount == null || amount.trim() === "" || isNaN(amount) || Number(amount) <= 0) {
                alert("Invalid amount entered.");
                return;
            }
            else{
                alert("₹ " + amount + " credited successfully!");
                let total =parseInt(amount)+30000;
                document.getElementById("balance-display").innerHTML = "₹ " + total;
            }
        }
        function debitAmount(){
            let amount=prompt("Enter the amount to debit");
            if (amount==null || amount.trim() === "" || isNaN(amount) || Number(amount) <= 0) {
                alert("Invalid amount entered.");
                return;
            }
            else{
                if(amount>30000){
                    alert("Insufficient Balance");
                }
                else{
                    alert("₹ " + amount + " debited successfully!");
                    let total =30000-parseInt(amount);
                    document.getElementById("balance-display").innerHTML = "₹ " + total;
                }
            }
        }
    </script>
</body>
</html>